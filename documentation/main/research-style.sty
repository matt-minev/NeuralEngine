\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{research-style}[2025/07/23 Research Document Style Package]

% Required packages
\RequirePackage{fancyhdr}
\RequirePackage{titletoc}
\RequirePackage{array}
\RequirePackage{adjustbox}
\RequirePackage{xcolor}

% Header setup
\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{Neural Engine, \textit{Matt Minev}}
\fancyhead[R]{Summer Research School 2025}
\fancyfoot[C]{\thepage}
\renewcommand{\headrulewidth}{0.5pt}
\renewcommand{\footrulewidth}{0pt}

% Remove header from first page
\fancypagestyle{plain}{%
    \fancyhf{}
    \fancyfoot[C]{\thepage}
    \renewcommand{\headrulewidth}{0pt}
}

% Professional Table of Contents styling
\renewcommand{\contentsname}{\Large\bfseries Table of Contents}

% TOC formatting
\titlecontents{chapter}
    [0em]
    {\vspace{1em}\bfseries\large}
    {\thecontentslabel.\quad}
    {}
    {\titlerule*[0.5em]{.}\contentspage}

\titlecontents{section}
    [1.5em]
    {\vspace{0.3em}}
    {\thecontentslabel\quad}
    {}
    {\titlerule*[0.5em]{.}\contentspage}

\titlecontents{subsection}
    [3em]
    {\vspace{0.1em}\small}
    {\thecontentslabel\quad}
    {}
    {\titlerule*[0.5em]{.}\contentspage}

% Auto-resize tables that are too wide
\newenvironment{autotable}[1][0.9]{%
    \begin{adjustbox}{width=#1\textwidth,center}%
}{%
    \end{adjustbox}%
}

% Enhanced table environment
\newenvironment{restable}[2][htbp]{%
    \begin{table}[#1]
    \centering
    \begin{autotable}
    \begin{tabular}{#2}
    \toprule
}{%
    \bottomrule
    \end{tabular}
    \end{autotable}
    \end{table}
}

% Improved spacing and typography
\setlength{\parskip}{0.6em}
\setlength{\parindent}{0pt}

% Better section spacing
\usepackage{titlesec}
\titlespacing*{\chapter}{0pt}{-20pt}{20pt}
\titlespacing*{\section}{0pt}{15pt}{10pt}
\titlespacing*{\subsection}{0pt}{12pt}{8pt}

% Enhanced chapter formatting
\titleformat{\chapter}[display]
{\normalfont\huge\bfseries\color{black!80}}
{\chaptertitlename\ \thechapter}{20pt}{\Huge}

% Code block improvements
\definecolor{codegray}{rgb}{0.95,0.95,0.95}
\definecolor{codeframe}{rgb}{0.8,0.8,0.8}

% Better list formatting
\usepackage{enumitem}
\setlist[itemize]{leftmargin=*,topsep=0.3em,itemsep=0.2em}
\setlist[enumerate]{leftmargin=*,topsep=0.3em,itemsep=0.2em}

% Caption improvements
\usepackage[font=small,labelfont=bf,margin=1cm]{caption}

% Hyperlink colors (subtle)
\hypersetup{
    colorlinks=true,
    linkcolor=black!70,
    filecolor=black!70,
    urlcolor=blue!70,
    citecolor=black!70
}
